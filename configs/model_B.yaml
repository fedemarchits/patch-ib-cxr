experiment_name: "model_b_local_alignment"

data:
  json_path: "/workspace/mimic_moro232_stratified.jsonl"
  image_root: "/datasets/MIMIC-CXR/files"
  batch_size: 64
  num_workers: 4
  image_size: 224

model:
  vision_backbone: "hf-hub:microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"
  text_backbone: "hf-hub:microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"
  mask_ratio: 0.5
  temperature: 0.1
  use_masking: false
  use_sparsity_loss: false
  # Local Alignment Configuration
  use_local_alignment: true
  local_alignment_temperature: 0.7
  # Disable uncertainty weighting for now, use fixed weight
  use_uncertainty_weighting: false
  local_alignment_weight: 100
  local_alignment_warmup_steps: 500

training:
  epochs: 40
  lr: 2.0e-5
  weight_decay: 0.01
  warmup_steps: 1000
  early_stopping_patience: 7
  print_freq: 50
  device: "cuda"
  use_amp: true
  gradient_accumulation_steps: 2
  # Light fine-tuning options
  freeze_backbone: false
  llrd_factor: 0.85  # Layer-wise LR decay: early layers get 0.85x LR of next layer

wandb:
  enable: true
  project: "Thesis-PatchIB"
  run_name: "model-b-local-alignment"
